language: python
variables:
  PYTHON_VERSION: '3.10'
  PORT: 80

commands:
  - pip install --upgrade pip
  - pip install -r requirements.txt
  - mkdir -p /home/site/wwwroot
  - cp -r ./* /home/site/wwwroot/

startup:
  command: |
    cd /home/site/wwwroot && \
    gunicorn --workers 2 \
             --worker-class uvicorn.workers.UvicornWorker \
             --bind 0.0.0.0:80 \
             --timeout 600 \
             --log-level debug \
             --access-logfile - \
             --error-logfile - \
             --capture-output \
             main:app